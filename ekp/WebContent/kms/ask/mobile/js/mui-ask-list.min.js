require({cache:{"kms/ask/mobile/js/list/AskListScrollableViewMixin":function(){define(["dojo/_base/declare","dojo/topic","dojo/query","dojo/dom-style","dojo/_base/array","mui/util","dojox/mobile/viewRegistry"],function(g,d,h,f,i,a,e){var b=g("km.ask.AskListScrollableViewMixin",null,{SCROLL_UP:"/kms/ask/scrollup",SCROLL_DOWN:"/kms/ask/scrolldown",buildRendering:function(){this.inherited(arguments);this.subscribe(this.SCROLL_UP,"scrollup");this.subscribe(this.SCROLL_DOWN,"scrolldown")},scrollup:function(k,j){this.defer(function(){this.enableTouchScroll(false)},1)},resize:function(){this.inherited(arguments);var j=h(".mblView",this.domNode);i.forEach(j,function(l){var k=e.getEnclosingView(l);k.height=a.getScreenSize().h-___header_height-_footerHeight+"px"},this)},scrolldown:function(k,j){this.defer(function(){this.enableTouchScroll(true)},100)},generateSwapList:function(){this.inherited(arguments);this.enableTouchScroll(true)},enableTouchScroll:function(n){var o=this.getChildren();for(var k=0;k<o.length;k++){var m=o[k].getChildren();for(var l=0;l<m.length;l++){m[l].disableTouchScroll=n}}}});return b})},"kms/ask/mobile/js/list/AskItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin","kms/ask/mobile/js/list/item/AskItemMixin"],function(a,d,b){return a("kms.ask.AskItemListMixin",[d],{itemRenderer:b})})},"kms/ask/mobile/js/list/AskHeaderMixin":function(){define(["dojo/_base/declare","mui/nav/MobileCfgNavBar","dojo/request","mui/util","dojo/text!./tmpl/header.html","dojo/string","dojo/dom-construct","dojo/Deferred","dojo/when","dojo/_base/lang","dojo/_base/json","dojo/_base/array","dojo/dom-style","dojox/mobile/_css3","dojo/dom-attr","dojo/topic"],function(f,a,e,h,o,i,d,n,l,b,q,k,j,p,m,g){return f("kms.ask.AskHeaderMixin",null,{navCount:3,SCROLL_UP:"/kms/ask/scrollup",SCROLL_DOWN:"/kms/ask/scrolldown",li:'<li data-index="${index}"><div><h3>${count}</h3><h4>${text}</h4></div></li>',buildRendering:function(){this.inherited(arguments);this.subscribe("/mui/nav/onComplete","onComplete");this.subscribe(this.SCROLL_UP,"scrollup");this.subscribe(this.SCROLL_DOWN,"scrolldown")},scrollup:function(s,r){j.set(this.headerNode,{height:0});j.set(this.navNode,{height:"3.8rem"})},scrolldown:function(s,r){j.set(this.headerNode,{height:window._header_height+"px"});j.set(this.navNode,{height:0})},onComplete:function(s,r){if(!r){return}l(this.requestNav(r),b.hitch(this,this.buildNav))},buildNav:function(){var r=[];k.forEach(this.navSource,function(u,t){r.push(i.substitute(this.li,{count:u.count,text:u.text,index:t}))},this);this.headerNode=d.toDom(i.substitute(o,{name:this.name,imgUrl:this.imgUrl,bgUrl:this.bgUrl,nav:r.join("")}));d.place(this.headerNode,this.domNode,"last");this.navNode=d.create("div",{className:"muiAskHeaderNav"},this.domNode);var s=this.getChildren();k.forEach(s,function(t){d.place(t.domNode,this.navNode,"last")},this);window._header_height=this.domNode.offsetHeight;this.connect(this.headerNode,"click","_onNavClick")},_onNavClick:function(r){var u=r.target;while(u){var t=m.get(u,"data-index");if(t){g.publish(this.SCROLL_UP,this,{});var s=this.getNav().getChildren()[t];s.setSelected();s.defaultClickAction(r);break}u=u.parentNode}},getNav:function(){if(this.navClaz){return this.navClaz}var s=this.getChildren();for(var r=0;r<s.length;r++){if(s[r] instanceof a){return this.navClaz=s[r]}}},navIndex:0,requestNav:function(r){this.nav_leng=Math.min(r.length,this.navCount);this.deferred=new n();this.navSource=[];for(var t=0;t<this.nav_leng;t++){var v=r[t];var w=v.text;var s=v.url;this.navSource.push({text:w});var u=this.ajaxRequest(h.setUrlParameter(s,"method","count"),t)}return this.deferred.promise},ajaxRequest:function(s,t){var r=this;var u=e.get(h.formatUrl(s),{handleAs:"json"}).response.then(function(v){if(v.status==200){r.navIndex++;r.navSource[t].count=q.fromJson(v.text)["count"];if(r.nav_leng==r.navIndex){r.deferred.resolve()}}})},startup:function(){this.inherited(arguments);window.___header_height=this.domNode.offsetHeight},makeTranslateStr:function(s){var r=s.y;return"translate3d(0,"+r+",0px)"},smooth:function(s){var r=p.transition;j.set(s,r," -webkit-transform 100ms linear");this.defer(function(){j.set(s,r,"")},100)},scrollTo:function(u,v,r){if(r){this.smooth(u)}var t=u.style;t[p.name("transform")]=this.makeTranslateStr(v)}})})},"kms/ask/mobile/js/list/item/AskItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/util","mui/list/item/_ListLinkItemMixin","dojo/string","mui/device/device","dojo/_base/array","mui/list/item/_ListThumbItemMixin"],function(d,b,k,g,i,l,e,j,f,a,h){var m=d("kms.ask.item.AskItemMixin",[l,j],{tag:"li",thumbs:null,buildRendering:function(){this._templated=!!this.templateString;if(!this._templated){this.domNode=this.containerNode=this.srcNodeRef||b.create(this.tag,{className:"muiMixContentItem"});this.contentNode=b.create("a",{className:"muiListItem"},this.domNode);this.makeLinkNode(this.contentNode)}this.inherited(arguments);if(!this._templated){this.buildInternalRender()}},buildInternalRender:function(){var q=b.create("div",{className:"muiMixContentTop"},this.contentNode);this.imageNode=b.create("div",{innerHTML:f.substitute('<img src="${d}">',{d:this.icon}),className:"muiMixContentIcon"},q);var p=b.create("div",{className:"muiMixContentCreate"},q);this.nameNode=b.create("div",{innerHTML:"<span>"+this.creator+"</span>",className:"muiMixContentCreator muiAuthor"},p);if(this.fdStatus&&this.fdStatus!=0){b.create("div",{innerHTML:'<i class="mui-asklist-close mui"></i>',className:"muiAskStatus"},q)}var t=b.create("div",{className:"muiMixContentCreated"},p);this.timeNode=b.create("span",{innerHTML:'<i class="mui mui-time"></i>'+this.created,className:"muiAskTime"},t);if(this.fdPostFrom&&this.fdPostFrom>=0){this.fromNode=b.create("span",{innerHTML:"来自"+a.getClientTypeStr(this.fdPostFrom),className:"muiAskFrom"},t)}var n=b.create("div",{className:"muiMixContentMiddle"},this.contentNode);if(this.label){this.scoreNode=b.create("div",{className:"mui mui-score",innerHTML:'&nbsp;<span class="muiAskScore">'+this.fdScore+"</span>"});this.labelNode=b.create("div",{className:"muiMixContentTitle",innerHTML:this.scoreNode.outerHTML+this.label},n)}if(this.tagName){var s=b.create("div",{className:"muiAskTag"},this.contentNode);var u=b.create("i",{className:"mui mui-label"},s);var o=b.create("span",{innerHTML:this.tagName},s)}var r=b.create("div",{className:"muiMixContentBottom"},this.contentNode);this.replyNode=b.create("div",{className:"muiMixContentNum",innerHTML:'<i class="mui mui-eval"></i><span class="muiNumber">'+this.fdReplyCount+"</span>"},r)},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(n){if(n){this._set("label",n)}}});return m})},"kms/ask/mobile/js/list/AskScrollableViewMixin":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/touch","dojo/_base/window","dojo/topic","dojo/_base/array","mui/util","dojo/dom-style","dojox/mobile/_css3"],function(d,a,b,g,e,j,f,h,k){var i=d("kms.ask.AskScrollableViewMixin",null,{SCROLL_UP:"/kms/ask/scrollup",SCROLL_DOWN:"/kms/ask/scrolldown",connects:[],dy:0,buildRendering:function(){this.inherited(arguments);this.bindEvent();this.subscribe(this.SCROLL_DOWN,"scollDown");this.subscribe(this.SCROLL_UP,"_scrollUp")},bindEvent:function(){this.touchStartHandle=this.connect(this.domNode,b.press,"onTouchStart")},unBindEvent:function(){this.disconnect(this.touchStartHandle)},_scrollUp:function(){this.unBindEvent()},scrollUp:function(l){e.publish(this.SCROLL_UP,this,{y:l})},scollDown:function(l){this.bindEvent()},onTouchStart:function(l){this.dy=0;this.connects.push(this.connect(g.doc,b.move,"onTouchMove"));this.connects.push(this.connect(g.doc,b.release,"onTouchEnd"));this.touchStartY=l.touches?l.touches[0].pageY:l.clientY;this.startPos=a.position(this.domNode)},onTouchMove:function(l){var m=l.touches?l.touches[0].pageY:l.clientY;this.dy=m-this.touchStartY;if(this.dy>0){return}if(Math.abs(this.dy)>=window._header_height-window.___header_height){return}this.scrollTo({y:this.dy})},onTouchEnd:function(n){var o=0,m=0;var l=window._header_height;if(this.dy<=0&&Math.abs(this.dy)>=l>>1){o=-(l-window.___header_height);this.scrollUp(o)}this.defer(function(){this.scrollTo({y:0},true)},100);this.disconnects()},disconnects:function(){j.forEach(this.connects,function(l){this.disconnect(l)},this);this.connects=[]},makeTranslateStr:function(m){var l=m.y+"px";return"translate3d(0,"+l+",0px)"},scrollTo:function(n,l){if(l){this.smooth()}var m=this.domNode.style;m[k.name("transform")]=this.makeTranslateStr(n)},smooth:function(){var l="-webkit-transition";h.set(this.domNode,l," -webkit-transform 100ms linear");this.defer(function(){h.set(this.domNode,l,"")},100)}});return i})},"kms/ask/mobile/js/list/AskView":function(){define(["dojo/_base/declare","dojox/mobile/View","dojo/dom-style","dojo/dom-class","dojo/_base/window","dijit/registry","dojo/_base/array","dojo/topic","kms/ask/mobile/js/list/AskScrollableViewMixin"],function(d,b,g,j,f,a,i,e,k){var h=d("kms.ask.AskView",[b,k],{buildRendering:function(){this.inherited(arguments)},startup:function(){if(this._started){return}this.findAppBar();this.inherited(arguments)},findAppBar:function(){if(this.domNode.parentNode){for(var m=0,l=this.domNode.parentNode.childNodes.length;m<l;m++){c=this.domNode.parentNode.childNodes[m];this.checkFixedBar(c)}}},checkFixedBar:function(m){if(m.nodeType===1){var l=m.getAttribute("fixed")||m.getAttribute("data-mobile-fixed")||(a.byNode(m)&&a.byNode(m).fixed);if(l==="top"){j.add(m,"mblFixedHeaderBar");this.fixedHeader=m}else{if(l==="bottom"){j.add(m,"mblFixedBottomBar");this.fixedFooter=m}}}},width:"100%",resize:function(){this.footerHeight=window._footerHeight=(this.fixedFooter)?this.fixedFooter.offsetHeight:0;this.headerHeight=(this.fixedHeader)?this.fixedHeader.offsetHeight:0;g.set(this.domNode,"height",f.global.innerHeight-this.footerHeight-this.headerHeight+"px");e.publish("/mui/calendar/viewComplete",this,{fixedHeaderHeight:this.headerHeight,fixedFooterHeight:this.footerHeight});i.forEach(this.getChildren(),function(l){if(l.resize){l.resize()}})}});return h})},"kms/ask/mobile/js/list/AskHomeButton":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class"],function(b,a,d){return b("kms.ask.mobile.AskHomeButton",null,{SCROLL_DOWN:"/kms/ask/scrolldown",icon:"mui mui-home-opposite",buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"muiHrefBack")},show:function(){a.publish(this.SCROLL_DOWN,this,{})}})})}}});