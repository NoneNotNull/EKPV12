
~~function(a){Function.prototype.bind||(Function.prototype.bind=function(a){var b=[].slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:a||{},c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),"undefined"==typeof Pda&&(Pda={},Pda.Base={}),Pda.Constant={},Pda.Util={data2kv:function(a){for(var b=[],c=0;c<a.length;c++){for(var d={},e=0;e<a[c].length;e++)d[a[c][e].col]=a[c][e].value;b.push(d)}return b},setParam:function(a,b){localStorage.setItem(a,b)},getParam:function(a){return localStorage.getItem(a)},getTouchEvent:function(a){return a.originalEvent?a.originalEvent:a},getTouchPoint:function(a){return{x:a[0].pageX,y:a[0].pageY}},replaceParam:function(a,b,c){var d=new RegExp;return d.compile("([\\?&]"+a+"=)[^&]*","i"),null==b?d.test(c)&&(c=c.replace(d,"")):(b=encodeURIComponent(b),d.test(c)?c=c.replace(d,"$1"+b):c+=(-1==c.indexOf("?")?"?":"&")+a+"="+b),"?"==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},replaceParams:function(a,b){for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.value.length;e++)b=this.replaceParam(d.key,d.value[e],b);return b},textEllipsis:function(a,b){if(a){if(2*a.length<=b)return a;for(var c=0,d=0;d<a.length;d++)if(Math.abs(a.charCodeAt(d))>200?c+=2:c++,c>b)return a.substring(0,d)+(c%2==0?"..":"...");return a}},toJSON:function(a){return new Function("return ("+a+");")()},upperFirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},getZIndex:function(){return Pda.___ZIndex___=Pda.___ZIndex___+10,Pda.___ZIndex___},getId:function(){return ____pda__id____++,"pda_id_"+____pda__id____},variableResolver:function(a,b){return a.replace(/\!\{([\w\.]*)\}/gi,function(a,c){var d=b[c];return null===d||void 0===d?"":d})},formatUrl:function(a){return null==a?"":"/"==a.substring(0,1)?Com_Parameter.ContextPath+a.substring(1,a.length):a},getClientHeight:function(){var b=0;return b=a.innerHeight?a.innerHeight:$(a).height()},browser:{webkit:/webkit/i.test(navigator.userAgent),isAndroid:/android/i.test(navigator.userAgent),isiOS:/like Mac OS/i.test(navigator.userAgent)},parseDate:function(a,b){var c=b,d=new Date;return/(y+)/.test(c)&&d.setFullYear(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),/(M+)/.test(c)&&d.setMonth(parseInt(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length),10)-1),/(d+)/.test(c)&&d.setDate(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),/(h+)/.test(c)&&d.setHours(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),/(m+)/.test(c)&&d.setMinutes(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),/(s+)/.test(c)&&d.setSeconds(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),/(S+)/.test(c)&&d.setMilliseconds(a.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length)),d},formatDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b}},Pda.___ZIndex___=50,Pda.Base.Widget={widgets:[],register:function(a){this.widgets.push(a)},hasWidget:function(a){for(var b=!1,c=0;c<this.widgets.length;){if(this.widgets[c]===a){b=!0;break}c++}return b}},Pda.Element=function(a){return ____pda__cache____[a]},Pda.Role=function(a,b){if(a){var c=[];for(var d in ____pda__cache____){var e=____pda__cache____[d];a==e.role&&(!b||e.group&&e.group==b)&&c.push(____pda__cache____[d])}return c}},Pda.Topic={_topic:{},emit:function(a){if("string"==typeof a&&(a={type:a}),a.target||(a.target=this),this._topic[a.type]instanceof Array)for(var b=this._topic[a.type],c=0,d=b.length;d>c;c++)b[c].call(this,a)},off:function(a,b){if(this._topic[a]instanceof Array)for(var c=this._topic[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}},on:function(a,b){"undefined"==typeof this._topic[a]&&(this._topic[a]=[]),this._topic[a].push(b)}}}(window),~~function(){Pda.Base.EventClass=SimpleClass.extend({role:"event",_listeners:null,init:function(){this._listeners={}},initId:function(a){this.id=a,this.target.attr("id",a)},on:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},emit:function(a){if("string"==typeof a&&(a={type:a}),a.target||(a.target=this),this._listeners[a.type]instanceof Array)for(var b=this._listeners[a.type],c=0,d=b.length;d>c;c++)b[c].call(this,a)},off:function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}},clientWidth:function(){return window.innerWidth?window.innerWidth:$(window).width()},clientHeight:function(){return Pda.Constant.clientHeight},emitGroup:function(a){var b=this;"string"==typeof a?a={type:a,target:b}:a.target=b;for(var c=Pda.Role(this.role),d=0;d<c.length;d++)c[d].group&&this.group&&c[d].group===this.group&&c[d].emit(a)},destroy:function(){delete ____pda__cache____[this.id]}})}(),~~function(){Pda.Base.Widget.register("component"),Pda.Component=Pda.Base.EventClass.extend({role:"component",init:function(a){return this._super(),this.target=$(a.target),this.lazy=a.lazy,a&&a.source?(a.parent&&(this.parent="string"==typeof a.parent?Pda.Element(a.parent):a.parent),this.___source___=a.source,this._url=this.___source___.url,this.url=this._url+"",this.format=this.___source___.format||this.format||new Function("data","return data;"),this.type=this.___source___.type||"json",this.___render___=a.render,this.templateId=this.___render___.templateId,this.templateUrl=this.___render___.url,this.render=this.render||this.___render___.render,this.target&&0!==this.target.length||(this.id=Pda.Util.getId(),this.target=$('<div id="'+this.id+'">'),$('[data-lul-role="body"]').append(this.target)),this.lazy||(this.draw(),this.loaded=!1),void(this.parentData=a.parentData||{})):void(this.self=!0)},startup:function(){this.self||(this.templateId&&(this.template=this.getTemplate(this.templateId)),this.templateUrl?(this.on("dataon",this.getRender),this.on("renderon",this.__render)):this.on("dataon",this.__render))},draw:function(){return this.self?(this.loaded=!0,this.target.show(),void this.emit("loaded")):(this.loading||(this.loading=Pda.loading()),this.loading.show(),this.loaded?(this.loading.hide(),void this.target.show()):void this.__getDate())},getTemplate:function(a){return $(a).html()},getRender:function(a){this.renderReq(a)},__render:function(a){var b=this,c=KmsTmpl(this.template).render({data:a.data,component:b});return this.render?void this.render.call(this,c):(this.target.html(c),this.loaded=!0,this.loading.hide(),void this.emit("loaded"))},renderReq:function(a){var b=this;$.ajax({url:this.templateUrl,dataType:"html",success:function(c){b.template=c,a.type="renderon",b.emit(a)}})},AjaxJson:function(){var a=this;this.___url=Pda.Util.variableResolver(this.url,a.parentData),$.ajax({url:this.___url,dataType:"json",success:function(b){return b&&a.format&&(b=a.format.call(a,b)),!b||b instanceof Array&&0==b.length?(a.emit("dataoff"),void(a.loading&&a.loading.hide())):(a.__data__=b,void a.emit({type:"dataon",data:b}))}})},Static:function(){this.emit({type:"dataon",data:this.___source___.data||[]})},__getDate:function(){this[Pda.Util.upperFirst(this.___source___.type)]()},destroy:function(){this._super(),this.target&&(this.target.off(),this.target.remove(),this.target=null),this.erase()},erase:function(){this.emit("erase",this),this.off("erase")}})}(window),window.____pda__cache____={},window.____pda__id____=1,Pda.init=function(a){a=a||document;var b=[];$("[data-lui-role]",a).each(function(){var a=$(this).attr("data-lui-role");if(!Pda.Base.Widget.hasWidget(a))return!0;var c=Pda.Util.toJSON($(this).find("script[type='text/config']").html());c||(c={}),c.target=$(this),b.push({id:$(this).attr("id"),role:a,config:c})});for(var c={},d=0;d<b.length;d++){var e=new(window.Pda[Pda.Util.upperFirst(b[d].role)])(b[d].config);b[d].id||(b[d].id=Pda.Util.getId()),e.initId(b[d].id),____pda__cache____[b[d].id]=e,c[b[d].id]=e}for(var d in c)c[d].startup&&c[d].startup();for(var d in c)!c[d].lazy&&c[d].draw&&c[d].draw();Pda.Topic.emit("ready")},$(function(){function a(){setTimeout(function(){var b=Pda.Util.getClientHeight();return 200>b?void a():(Pda.Constant.clientHeight=b,$(document.body).css("height",Pda.Util.getClientHeight()),void Pda.init())},100)}$(document.body).css("height",2e3),a()}),~~function(){Pda.Base.Widget.register("column"),Pda.Column=Pda.Component.extend({role:"column",totalSize:1,currentPage:0,lock:!1,padding:10,currentY:0,moved:!1,start:{},touchMovePoint:{},touchStartPoint:{x:0,y:0},init:function(a){this.scroll=a.scroll===!1?!1:"auto"==a.scroll?Pda.Util.browser.isiOS:!0,this._super(a)},startup:function(){this._super(),this.parent=this.target.parents('[data-lui-role="listview"]'),this.parent&&this.parent.length>0&&Pda.Element(this.parent.attr("id")).pushChild(this.id,this);var a=this,b={width:this.clientWidth()-2*this.padding,padding:"0 "+this.padding+"px","min-height":200};if(this.ch=this.clientHeight(),this.container=$("<div>"),this.target.append(this.container),!this.scroll){var a=this;b.height="100%",b["overflow-y"]="scroll",this.target.on("scroll",function(){a.target.scrollTop()+a.target.height()>=a.container.height()&&a.onTm()})}this.target.css(b),this.on("dataoff",function(){a.buildNoResult(),a.offTouch()}),this.on("dataon",function(){a.offTouch(),a.onTouch()})},offTouch:function(){this.target.off("touchstart").off("touchmove").off("touchend")},onTouch:function(){this.target.on("touchstart",this.tsHandler.bind(this)),this.target.on("touchmove",this.tmHandler.bind(this)),this.scroll&&this.target.on("touchend",this.teHandler.bind(this))},buildNoResult:function(){this.container.html('<div style="width:100%;height:100%;text-align:center;padding-top:100px;"><span>未找到相关文档.</span></div>')},__draw:function(){this.hasNext()&&(this.lock||(this.loaded=!1,this.currentPage+=1,this.url=Pda.Util.replaceParams([{value:[this.currentPage],key:"pageno"}],this.url),this.draw()))},_tranlate:function(a,b,c){return{"-webkit-transition":c+"ms cubic-bezier(0.1, 0.57, 0.1, 1)","-webkit-transform":"translate( "+a+"px,"+b+"px) translateZ(0px)"}},stopTransition:function(){var a="-webkit-transition-duration";this.target.css(a,0)},resetScroll:function(){this.__scroll__(0,0,0)},scrollTo:function(a,b,c){this.currentY=this.currentY+b;var d=this.container.height()+50;this.currentY<-d+this.ch&&(this.currentY=-d+this.ch,this.onTm(d)),this.currentY>0&&(this.currentY=0),this.__scroll__(a,this.currentY,c),d=null},__scroll__:function(a,b,c){this.target.css(this._tranlate(a,b,c))},onTm:function(){this.__draw()},getLoading:function(){return this.loading=$($(".loading").length>0?".loading":'<div class="loading"><span></span></div>'),this.loading},tsHandler:function(a){var b=Pda.Util.getTouchEvent(a);this.start=Pda.Util.getTouchPoint(b.touches),this.scroll&&(this.cancelEvent(a),this.moved=!1,this.touchStartPoint=Pda.Util.getTouchPoint(b.touches),this.stopTransition(),this.startTime=this.getTime())},cancelEvent:function(a){a.preventDefault(),a.stopPropagation()},tmHandler:function(a){var b=Pda.Util.getTouchEvent(a).touches;if(!this.scroll){this.touchStartPoint=Pda.Util.getTouchPoint(b);var c=this.touchStartPoint.y-this.start.y,d=this.touchStartPoint.x-this.start.x;return void(this.parent&&this.parent.teHandler&&this.parent.teHandler(10*d,10*c))}this.cancelEvent(a),this.moved=!0,this.touchMovePoint=Pda.Util.getTouchPoint(b),this.scrollTo(0,this.touchMovePoint.y-this.touchStartPoint.y,0),this.touchStartPoint=Pda.Util.getTouchPoint(b);var e=this.getTime();e-this.startTime>300&&(this.startTime=e,this.start.y=this.touchMovePoint.y)},teHandler:function(a){var b=this.touchStartPoint.y-this.start.y,c=this.touchStartPoint.x-this.start.x,d=this.parent;d&&d.target&&d.target.length>0&&d.teHandler(c,b),d=null,this.cancelEvent(a);var e=this.getTime()-this.startTime;if(c=null,Math.abs(b)>20)if(b>0){if(e>=150)return;this.scrollTo(0,188,791),this.start.y+=188}else{if(e>=300)return;this.scrollTo(0,-188,791),this.start.y-=188}b=null,this.moved||this.__click(a)},getTime:function(){return(new Date).getTime()},render:function(a){a&&(this.container.append(a),this.loaded=!0,this.lock=!1,this.loading&&this.loading.hide(),this.hasNext()&&(this.loading=this.getLoading(),this.container.append(this.loading),this.loading.show()),this.emit("loaded"))},hasNext:function(){return this.totalPage>this.currentPage},format:function(a){var b=a.page;for(var c in b)this[c]=parseInt(b[c]);return this.totalPage=Math.ceil(this.totalSize/this.pageSize),Pda.Util.data2kv(a.datas)},reDraw:function(){this.container.html(""),this.__getDate()},draw:function(){this.lock||(this.loaded||(this.lock=!0),this._super())},selected:function(){this.lock=!1,this.target.show(),this.draw()},__click:function(a){var b,c=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(c.tagName)||(b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),b._constructed=!0,c.dispatchEvent(b))},change:function(){},toTop:function(){this.scroll?(this.__scroll__(0,0,791),this.currentY=0):this.target.scrollTop(0)}})}(window),~~function(){Pda.Base.Widget.register("rowTable"),Pda.RowTable=Pda.Column.extend({})}(window),~~function(){Pda.Base.Widget.register("listview"),Pda.Listview=Pda.Base.EventClass.extend({role:"listview",__index__:0,children:{},swipeX:100,swipeY:70,lock:!1,index:0,prefix:"q._prop_.",init:function(a){this._super(),this.target=$(a.target),this.container=$('<div class="lui-listview-container">')},pushChild:function(a,b){var c=this;this.children[a]={obj:b,left:c.__index__*c.clientWidth(),index:c.__index__,id:a},b.parent=c,this.__index__++},startup:function(){var a=this;Pda.Topic.on("listChange",function(b){a.listChange(b)})},listChange:function(a){var b=a.data||{},c=this.prefix,d=[],e=this.children,f=a.categoryId,g=a.prop;for(var h in e){var i=e[h],j=i.obj;j.loaded=!1;for(var h in b){var k=c+encodeURIComponent(h)+"="+encodeURIComponent(b[h]);d.push(k)}var l=j._url,m=d.join("&");g&&(l=Pda.Util.replaceParams([{value:[g.value],key:g.key}],l)),f&&(l=Pda.Util.replaceParams([{value:[f],key:"categoryId"}],l)),l+=l.indexOf("?")>0?"&"+m:"?"+m,j.url=l,j.container.html(""),j.resetScroll()}var n=this.getIndex();this.selectedByIndex(n,!0)},draw:function(){var a=this.clientHeight(),b={overflow:"hidden",height:a-50};this.target.css(b),this.container.css(b);var c=this.target.children();c.css({"float":"left"}),c.appendTo(this.container),this.target.append(this.container);var d=this;this.container.on("webkitTransitionEnd",function(){d.lock=!1})},teHandler:function(a,b){this.lock||Math.abs(a)>=this.swipeX&&Math.abs(b)<=this.swipeY&&(0>a?this.slideLeft():this.slideRight())},slideLeft:function(a){var b=this.getIndex();this.selectedByIndex(b+1,a)},slideRight:function(a){var b=this.getIndex();this.selectedByIndex(b-1,a)},selectedByIndex:function(a,b){for(var c in this.children){var d=this.children[c];if(d.index===a){b||(this.lock=!0),this.selectedList(d),Pda.Topic.emit({type:"slide",obj:d});break}}},getListByIndex:function(a){for(var b in this.children){var c=this.children[b];if(c.index===a)return c}},selectedList:function(a){a.obj.selected(),this.setIndex(a.index),this.container.css(this._3dChange(-a.left+"px"))},getIndex:function(){return this.index},setIndex:function(a){this.index=a},selected:function(a){var b=this.children;for(var c in b)b[c].obj.change&&b[c].obj.change();if(b[a]){var d=b[a];this.selectedList(d)}},_3dChange:function(a){return{"-webkit-transform":"translate3d("+a+", 0, 0)","-moz-transform":"translate3d("+a+", 0, 0)",transform:"translate3d("+a+", 0, 0)"}},top:function(){var a=this.getListByIndex(this.index).obj;a.toTop()}})}(window),~~function(a){Pda.Base.Widget.register("panel"),Pda.Panel=Pda.Base.EventClass.extend({role:"panel",touchStartPoint:{},touchEndPoint:{},swipeThreshold:10,swipeY:3,action:"",top:0,loaded:!1,init:function(b){this._super(b),this.target=b.target,this.page=$('[data-lui-role="page"]'),this.slide(b),this.index=9e3+Pda.Util.getZIndex(),this.url=b.url,this.width=b.width||1,this.mask=b.mask||!1,this.canClose=b.canClose===!1?!1:!0,this.active=!1,this.target&&0!==this.target.length||(this.id=b.id?b.id:Pda.Util.getId(),this.target=$('<div id="'+this.id+'">'),$('[data-lul-role="body"]').append(this.target)),a.____pda__cache____[this.id]=this},startup:function(){},draw:function(){this.target.css({position:"absolute",top:this.top,height:0,width:0,overflow:"hidden"}),this.target.addClass("lui-panel"),this.target.addClass("lui-panel-transition"),$('[data-lul-role="body"]').append(this.target),this.bindEvent()},bindEvent:function(){var a=this;this.target.on("touchstart",a.tsHandler.bind(a)),this.target.on("touchmove",a.tmHandler.bind(a)),this.target.on("click",function(b){var c=$(b.target);c.hasClass("lui-back-icon")&&a.slideLeft__()})},tsHandler:function(a){var b=Pda.Util.getTouchEvent(a);this.touchStartPoint=Pda.Util.getTouchPoint(b.touches)},tmHandler:function(a){var b=Pda.Util.getTouchEvent(a);this.touchEndPoint=Pda.Util.getTouchPoint(b.touches);var c=this.touchStartPoint.x,d=this.touchEndPoint.x,e=c-d,f=this.touchStartPoint.y,g=this.touchEndPoint.y,h=f-g;Math.abs(e)>=this.swipeThreshold&&Math.abs(h)<=this.swipeY&&0>e&&this[this.action+"__"]()},selected:function(){this[this.action](),this.loaded||this.url&&(this.on("reqon",this.reqOn.bind(this)),this.req(this.url))},reqOn:function(a){a&&a.txt&&(this.target.html(a.txt),Pda.init(this.target),this.loaded=!0,this.emit({type:"ready",id:this.id}))},evalHtml:function(a){for(var b=$(a).find("script"),c=/^$|\/(?:java|ecma)script/i,d=0;d<b.length;d++){var e=b[d];c.test(e.type||"")&&(e.src?this._evalUrl(e.src):e.type&&"text/javascript"!==e.type||this._evalScript(e.innerHTML))}},_evalScript:function(a){window.eval.call(window,a)},_evalUrl:function(a){$.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},req:function(a){var b=this;$.ajax({url:a,dataType:"html",success:function(a){b.evalHtml(a);var c={type:"reqon",txt:a};b.emit(c)}})},slideLeft:function(){var a=this.clientHeight(),b=this.clientWidth(),c=this;$('[data-lul-role="body"]').css({width:b,overflow:"hidden",height:a}),this.target.css({width:b*this.width,height:a,"z-index":this.index}),this.page.css({height:a,overflow:"auto"}),this.showMask(),setTimeout(function(){c.target.addClass("lui-panel-animate"),this.active=!0},100)},showMask:function(){if(this.mask){var a="lui-panel-dismiss";0==this.canClose&&(a="lui-panel-dismiss-not-hide");var b=$("."+a);this.mask=b.length>0?b.show():$('<div class="'+a+'">').appendTo("body").css("height",this.clientHeight()),this.bindMaskClick(this)}},bindMaskClick:function(a){this.mask.off().on("click",function(){a.slideLeft__()})},hideMask:function(){this.mask&&this.mask.hide()},recover:function(){$('[data-lul-role="body"]').css({height:""}),this.page.css({height:"",overflow:"auto"})},tranEndCallBack:function(a){a=0==a?!1:!0;var b=this;this.target.on("transitionend",function(){b.target.css({right:0,width:0,height:0}),a&&b.recover(),b.target.off("transitionend"),b.emit("transitionend")})},slideLeft__:function(a){this.tranEndCallBack(a);var b=this;setTimeout(function(){b.target.removeClass("lui-panel-animate"),this.active=!1},100),this.hideMask()},slide:function(a){switch(a.pos||"left"){case"left":this.action="slideLeft",this.right=9999}},destroy:function(){this._super(),this.target&&(this.target.off(),this.target.remove(),this.target=null)}})}(window),~~function(){Pda.Base.Widget.register("category"),Pda.Category=Pda.Panel.extend({init:function(a){this._super(a),this.modelName=a.modelName,this.mainModelName=a.mainModelName,this.href=a.href,this.isSelect=a.isSelect?!0:!1,this.children=[],this.disable=a.disable},startup:function(){if(this._super(),!this.___c__config){var a=this.target.find('[data-lui-role="component"]');this.___c__config=Pda.Util.toJSON($(a).find("script[type='text/config']").html())}},draw:function(){this._super(),this.bindClick()},bindClick:function(){var a=this;this.target.on("click",function(b){var c=$(b.target);if(c.hasClass("lui-category-subject")){var d=c.attr("data-lui-id"),e=c.text(),f=c.attr("data-lui-disable"),g=a.getCache(d);if(g)return void g.slideLeft();var h={parentData:{parentId:d}};$.extend(h,a.___c__config);var i=new Pda.Component(h),j={};i.format=function(a){return j._=a.filter,a.list?a:null},i.startup(),i.on("dataoff",function(){a.isSelect?i.emit({type:"dataon",data:""}):a.emitSlide(a,d,e,j._)}),a.isSelect?a.buildSub(i,d,e,j._,f):i.on("dataon",function(){a.buildSub(i,d,e,j._,f)}),i.draw()}var k="data-category-type";c.hasClass("lui-back-icon")&&a.slideLeft__(),"doc"==c.attr(k)&&a.buildDoc(c),"ok"==c.attr(k)&&a.buildOk(c)})},buildOk:function(){Pda.Topic.emit({type:"category-select-ok",id:this.parentId,name:this.parentName}),this.slideLeft___()},buildSub:function(a,b,c,d,e){var f=new Pda.Category({modelName:this.modelName,mainModelName:this.mainModelName,href:this.href,width:this.width,isSelect:this.isSelect,mask:this.mask,canClose:this.canClose,disable:e});f.hasFilter=d?d:!1,f.___c__config=this.___c__config,f.parent=this,f.parentName=c,f.parentId=b,this.children.push(f),a.parent=f,f.target.append(a.target),f.startup(),f.draw(),f.slideLeft()},bindMaskClick:function(a){this.mask.off().on("click",function(){0!=a.canClose&&(a.isSelect?a.slideLeft___():a.slideLeft__())})},buildDoc:function(){this.emitSlide(this,this.parentId,this.parentName)},emitSlide:function(a,b,c,d){var e=this;Pda.Topic.emit({type:"listChange",categoryId:b,categoryName:c,target:a,hasFilter:d?d:e.hasFilter}),this.slideLeft___()},slideLeft___:function(){for(var a=this;a;)a.slideLeft__(!0),a=a.parent},getCache:function(a){for(var b=this.children,c=0;c<b.length;c++){var d=b[c];if(d.parentId&&d.parentId==a)return d}return null},destroy:function(){this.child&&this.child.destroy(),this._super(),this.target&&(this.target.off(),this.target.remove(),this.target=null)},slideLeft__:function(a){var b=!0;if(this.parent)b=!1,this.isSelect&&this.parent.bindMaskClick(this.parent);else if(0==this.canClose&&!a)return;this._super(b)},hideMask:function(){this.parent&&this.isSelect||this._super()},buildFilter:function(a,b,c,d){var e=this.getFilter(a,b,c,d);e.slideLeft()},getFilter:function(a,b,c,d){var e=this.getFilterCache(c);return e?e:(e=new Pda.Filter({parent:a,href:b,parentId:c,parentName:d}),e.startup(),e.draw(),e)},getFilterCache:function(a){for(var b=Pda.Role("filter"),c=0;c<b.length;){if(b[c].__parentId==a)return b[c];c++}return null},doFilter:function(){Pda.Topic.on("listChange",function(a){var b=a.target,c=a.categoryId,d=a.categoryName;b.buildFilter(b,b.href,c,d)})}})}(window),~~function(){Pda.Base.Widget.register("filter"),Pda.Filter=Pda.Category.extend({role:"filter",init:function(a){this._super(a),this.parent=a.parent,this.parentId=a.parentId+"filter",this.__parentId=a.parentId,this.parentName=a.parentName,this.modelName=this.parent.modelName,this.mainModelName=this.parent.mainModelName,this.comOptions=a.comOptions||{},this.href=a.href,this.filterData={}},startup:function(){this._super();var a=this,b={source:{url:Pda.Util.formatUrl("/sys/property/sys_property_filter_pda/sysPropertyFilterPda.do?method=getPropertyFilter&modelName="+a.modelName+"&fdCategoryId="+a.__parentId+"&mainModelName="+a.mainModelName),type:"ajaxJson"},render:{url:Pda.Util.formatUrl("/kms/common/pda/core/category/tmpl/filter.jsp")},lazy:!0};$.extend(b,this.comOptions),this.filter=new Pda.Component(b),this.target.append(this.filter.target),this.filter.parent=this,this.child=this.filter,this.filter.startup()},bindClick:function(){var a=this;a.target.on("click",function(b){var c=$(b.target);c.hasClass("lui-back-icon")&&a.slideLeft__(),c.hasClass("lui-filter-item")&&a.buildItem(b),c.hasClass("lui-category-submit-btn")&&a.filterSubmit()})},filterSubmit:function(){var a=this,b=this.filterData;Pda.Topic.emit({type:"listChange",data:b,categoryId:a.__parentId}),this.slideLeft__()},draw:function(){this._super(),this.filter.draw()},buildItem:function(a){var b=this.filter.__data__;if(b&&b.filters){var c=$(a.target),d=c.prev(),e=d.attr("data-lui-id"),f=d.text();d=null;for(var g=[],h=0;h<b.filters.length;h++)if(e==b.filters[h].settingId){g=b.filters[h].options;break}var i=new Pda.Component({source:{data:g,type:"static"},render:{url:Pda.Util.formatUrl("/kms/common/pda/core/category/tmpl/item.jsp")}});i.startup(),i.draw();var j=Pda.delement({title:f,element:i.target});j.show();var k=this;i.target.on("click",function(a){var b=$(a.target);if(b.hasClass("lui-filter-item-subject")){var d=b.attr("data-lui-id"),f=b.text();k.setFilterData(e,d),c.html(f),j.hide()}b=null})}},getFilterData:function(a){return this.filterData[a]},setFilterData:function(a,b){this.filterData[a]=b},emptyFilterData:function(){this.filterData={}}}),Pda.simpleCategoryForNewFile=function(a){var b="category-select-panel";if(Pda.Element(b)){if("undefined"!=typeof a.canClose&&a.canClose!=Pda.Element(b).canColse){Pda.Element(b).canClose=a.canClose;for(var c=0;c<Pda.Element(b).children.length;c++)Pda.Element(b).children[c].canClose=a.canClose}return void Pda.Element(b).slideLeft()}var d=a.modelName,e=a.params,f=Com_Parameter.ContextPath+"kms/common/kms_common_simple_category/KmsCommonSimpleCategory.do?method=list&type=2&authType=2&modelName="+d+"&parentId=!{parentId}";if(e){var g=[];for(var h in e)g.push("qq."+encodeURIComponent(h)+"="+encodeURIComponent(e[h]));f+="&"+g.join("&")}var i={source:{url:f,type:"ajaxJson"},render:{url:Com_Parameter.ContextPath+"kms/common/pda/core/category/tmpl/category_select.jsp"},lazy:!0,parent:b};Pda.Topic.on("category-select-ok",function(b){a.action(b)});var j=new Pda.Component(i);j.startup();var k=new Pda.Category({modelName:d,id:b,width:.8,isSelect:!0,mask:!0,canClose:a.canClose});j.parent=k,k.___c__config=i,k.target.append(j.target),k.startup(),k.draw(),k.slideLeft(),____pda__cache____[b]=k,j.draw()}}(window),~~function(){Pda.Base.Widget.register("fixed"),Pda.Fixed=Pda.Base.EventClass.extend({role:"fixed",init:function(a){this._super(a),this.target=$(a.target),this.height=this.target.height(),this.draw(),this.bindEvent()},draw:function(){this.target.css({position:"fixed","z-index":"1000"})},bindEvent:function(){var a=this;$(document.body).on("click",function(b){0==$(b.target).parents('[data-lui-role="fixed"]').length&&a.click()})},click:function(){var a=document.body,b=this.target;a.scrollTop>this.height&&("fixed"==b.css("position")?b.slideUp("fast",function(){b.css({position:"absolute",display:"block"})}):(b.css({position:"fixed",display:"none"}),b.slideDown("fast")))}})}(window),~~function(){Pda.Base.Widget.register("dialog"),Pda.Dialog=Pda.Base.EventClass.extend({role:"dialog",init:function(a){this._super(a)},draw:function(){},destroy:function(){this._super(),this.target&&(this.target.off(),this.target.remove(),this.target=null)},maskBoxShow:function(a){a||(a="lui-dialog-mask"),this.mask=$("."+a),this.mask&&this.mask.length>0?this.mask.show():(this.mask=$('<div class="'+a+'"/>'),$('[data-lul-role="body"]').append(this.mask))},maskBoxHide:function(){this.mask&&this.mask.length>0&&this.mask.hide()}}),Pda.DElement=Pda.Dialog.extend({init:function(a){this._super(),a||(a={}),this.title=a.title||"",this.canClose=a.canClose=!0,this.element=a.element?$(a.element):null},draw:function(){var a=this;this.maskBoxShow(),this.target=$('<div class="lui-dialog-element">'),this.titleText=$("<span>"),this.titleText.append(this.title),this.titleBar=$('<div class="lui-dialog-element-title">'),this.titleBar.append(this.titleText),this.canClose&&(this.closeDiv=$('<span class="close">').on("click",function(){a.hide()}),this.titleBar.append(this.closeDiv)),this.container=$('<div class="lui-dialog-element-container">'),this.element&&this.container.append(this.element),this.target.append(this.titleBar).append(this.container),$('[data-lul-role="body"]').append(this.target)},show:function(){this.draw(),this.target.show()},hide:function(){this.maskBoxHide(),this.destroy()}}),Pda.Loading=Pda.Dialog.extend({init:function(a){this._super(a)},draw:function(){this.target=$('<div class="lui-dialog-loading"/>'),this.maskBoxShow("lui-dialog-mask-loading"),$('[data-lul-role="body"]').append(this.target)},hide:function(){this.target.length>0&&this.target.hide(),this.maskBoxHide()},show:function(){this.target=$(".lui-dialog-loading"),this.mask=$(".lui-dialog-mask-loading"),this.target&&this.target.length>0?(this.target.show(),this.mask.show()):this.draw()}}),Pda.loading=function(){return new Pda.Loading},Pda.delement=function(a){return new Pda.DElement(a)}}(window),~~function(){Pda.Base.Widget.register("collapsible"),Pda.Collapsible=Pda.Base.EventClass.extend({role:"collapsible",init:function(a){this._super(a),this.target=a.target,this.title=a.title||"",this.expand=a.expand||!1,this.childrenContents=[],this.group=a.group||"_default_group",this.isloaded=!1,this.expandClass="lui-collopsible-expand",this.unexpandClass="lui-collopsible-unexpand",this.multi=a.multi},childrenContents:null,startup:function(){var a=this;this.target.find("[data-lui-role=component]").each(function(){var b=Pda.Element(this.id);b&&a.childrenContents.push(b)}),a.on("groupon",function(b){if(b&&b.target&&b.target!==a){var c=a.childrenContents.length;if(a.target.hasClass(a.expandClass)){for(var d=0;c>d;d++)a.childrenContents[d].target.hide();a.target.removeClass(a.expandClass),a.target.addClass(a.unexpandClass)}}})},_drawChildren:function(a){var b=this.childrenContents.length;if(a?!0:this.expand){for(var c=0;b>c;c++)this.childrenContents[c].draw();this.isloaded=!0,this.target.removeClass(this.unexpandClass),this.target.addClass(this.expandClass)}},draw:function(){this.target.addClass("lui-collopsible "+this.unexpandClass),this.target.prepend('<a href="javascript:;" class="lui-collopsible-head">'+this.title+"</div>"),this.bindEvent()},bindEvent:function(){var a=this;a.target.find(".lui-collopsible-head").on("click",a._toggleContent.bind(a))},_toggleContent:function(){var a=this,b=a.target;if(this.multi||a.emitGroup("groupon"),a.isloaded){var c=this.childrenContents,d=c.length,e=0;if(b.hasClass(a.expandClass)){for(;d>e;e++)c[e].target.hide();b.removeClass(a.expandClass),b.addClass(a.unexpandClass)}else{for(;d>e;e++)c[e].target.show();b.removeClass(a.unexpandClass),b.addClass(a.expandClass)}}else a._drawChildren(!0)},selected:function(){this._drawChildren(!1)}})}(window),~~function(){Pda.Base.Widget.register("button"),Pda.Button=Pda.Base.EventClass.extend({role:"button",init:function(a){this._super(a),this.target=$(a.target),this.currentClass=a.currentClass,this.toggleClass=a.toggleClass,this.onclick=a.onclick,this.group=a.group,this.text=a.text,this.selected=a.selected||!1,this.enable=a.enable===!1?!1:!0},draw:function(){this.addClass(this.currentClass),this.text&&this.innerText(this.text),this.selected&&this.addClass(this.toggleClass),this.bindClick(this.triggleClick.bind(this))},innerText:function(a){this.target.html(a)},addClass:function(a){return this.target.addClass(a),this.target},removeClass:function(a){return this.target.removeClass(a),this.target},startup:function(){var a=this;this.on("groupon",function(b){b&&b.target&&(a.selected=!1,a.toggleClass&&a.removeClass(a.toggleClass),b.target===a&&(a.addClass(a.toggleClass),a.selected=!0))})},triggleClick:function(){this.enable&&(new Function(this.onclick).apply(this),this.emitGroup("groupon"))},bindClick:function(a){var b=this;return b.target.off("click").on("click",function(b){a(b)}),b.target},disabled:function(){this.enable=!1},enabled:function(){this.enable=!0}})}(window);