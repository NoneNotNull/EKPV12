require({cache:{
'km/forum/mobile/resource/js/ForumTopicReplayMixin':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
	], function(declare, domConstruct) {
	var create = declare("km.forum.mobile.resource.js.ForumTopicReplayMixin", null, {
		
		align:"center",
		
		count:0,
		
		postCreate : function() {
			this.inherited(arguments);
			this.subscribe("/km/forum/replaySuccess",'changeCount');
		},
		
		_onClick:function(evt){
			this.defer(function(){
				if(window.replayPost){
					window.replayPost();
				}
			},350);
		},
		
		changeCount:function(){
			this.count = this.count + 1; 
			this.labelNode.innerHTML =  this.count;
		},
		
		_setCountAttr:function(count){
			if(count>0){
				this.labelNode.innerHTML =  count;
			}else{
				this.labelNode.innerHTML = '';
			}
		}
	});
	return create;
});
},
'km/forum/mobile/resource/js/ForumCategoryItemListMixin':function(){
define([
    "dojo/_base/declare",
	"mui/list/_TemplateItemListMixin",
	"km/forum/mobile/resource/js/ForumCategoryItemMixin"
	], function(declare, _TemplateItemMixin, ForumCategoryItemMixin) {
	
	return declare("km.forum.mobile.resource.js.ForumCategoryItemListMixin", [_TemplateItemMixin], {
		
		itemRenderer : ForumCategoryItemMixin
		
	});
});
},
'km/forum/mobile/resource/js/ForumTopicItemMixin':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
    "dojo/dom-class",
    "mui/util",
    "mui/list/item/MixContentItemMixin"
	], function(declare, domConstruct, domClass, util, MixContentItemMixin) {
	var item = declare("km.forum.mobile.resource.js.ForumTopicItemMixin", [MixContentItemMixin], {
		//回复数
		replay:0,
		
		//阅读数
		count:0,
		
		//是否为置顶帖
		isTop:"0",
		
		//点赞数
		supportCount:0,
		
		buildInternalRender:function(){
			if(this.isTop=="1"){
				this.buildTopicItemRender();
			}else{
				this.inherited(arguments);
			}
		},
		
		//绘制置顶帖子
		buildTopicItemRender:function(){
			domClass.add(this.domNode,"muiMixContentTopItem");
			var topArea = domConstruct.create("div",{className:"muiMixContentTopInfo"},this.contentNode);
			domConstruct.create("span",{className:"muiTopicHeadSign muiTopicHeadTop",innerHTML: "置顶"},topArea);
			var cate = domConstruct.create("span",{className:"muiMixContentTopCate",innerHTML: '[' + this.category + ']'},topArea);
			this.connect(cate,'click','gotoCate');
			domConstruct.create("span",{className:"muiMixContentTopTitle", innerHTML:this.label},topArea);
		},
		
		gotoCate:function(evt){
			var url = "/km/forum/mobile/index.jsp";
			var dataUrl = '/km/forum/km_forum/kmForumTopicIndex.do?method=listChildren&q.categoryId=!{categoryId}&orderby=fdLastPostTime&ordertype=down';
			url = util.setUrlParameter(url,"moduleName",this.category);
			url = util.setUrlParameter(url,"filter","1");
			url = util.setUrlParameter(url,"queryStr",util.setUrlParameter(dataUrl,"q.categoryId",this.categoryId));
			location = util.formatUrl(url);
		},
		
		replayPost:function(evt){
			if(window.replayPost)
				window.replayPost(this);
		},
		
		buildBottomRender:function(bottom){
			if(this.supportCount)
				var parise = domConstruct.create("div",{className:"muiMixContentNum",
					innerHTML:"<i class='mui mui-praise'></i><span class='muiNumber'>"+(this.supportCount==0?'':this.supportCount)+'</span>'},bottom);
			//this.connect(parise,'click','parisePost');
			if(this.replay){
				var replayDiv = domConstruct.create("div",{className:"muiMixContentNum",
					innerHTML: "<i class='mui mui-msg'></i><span class='muiNumber'>"+(this.replay==0?'':this.replay)+'</span>'},bottom);
				//this.connect(replayDiv,'click','replayPost');
			}
			if(this.count){
				domConstruct.create("div",{className:"muiMixContentNum",
					innerHTML: "<i class='mui mui-eyes'></i><span class='muiNumber'>"+(this.count==0?'':this.count)+'</span>'},bottom,'last');
			}
		}
	});
	return item;
});
},
'km/forum/mobile/resource/js/ForumCategoryBox':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
    "dojo/dom-class",
    "dojo/request",
    "mui/util",
    "dijit/_WidgetBase"
	], function(declare, domConstruct, domClass, request, util, _WidgetBase) {
	var catebox = declare("km.forum.mobile.resource.js.ForumCategoryBox", [_WidgetBase], {
		//论坛板块id
		categoryId:null,
		
		categoryName:'',
		
		baseClass:"muiForumCategory",
		
		categoryUrl:'/km/forum/km_forum_cate/kmForumCategory.do?method=categoryDetail&categoryId=!{categoryId}',
		
		cateListDataUrl: null,
		
		buildRendering : function() {
			this.inherited(arguments);
			domConstruct.create("i", {'className':'mui mui-loading mui-spin'}, this.domNode);
		},
		postCreate : function() {
			this.inherited(arguments);
		},
		
		startup:function(){
			this.inherited(arguments);
			var _self = this;
			request.post(util.formatUrl(util.urlResolver(this.categoryUrl,this)), {
				handleAs : 'json'
			}).then(function(data) {
				_self.buildCateInfo(data);
			}, function(data) {
				_self.buildErrorInfo(data);
			});
		},
		
		buildCateInfo:function(data){
			this.buildBaseFrame();
			if(data['name'] && data['name']!=''){
				this.titleNode.innerHTML = data['name'];
			}
			if(data['description'] && data['description']!=''){
				domConstruct.create("div", {'className':'muiForumCateDesc',innerHTML:data['description']}, this.detailNode);
			}
			var topicCount = 0;
			if(data['topicCount']){
				topicCount = data['topicCount'];
			}
			var postCount = 0;
			if(data['postCount']){
				postCount = data['postCount'];
			}
			var countNode = domConstruct.create("div", {'className':'muiForumCateCount'}, this.detailNode);
			domConstruct.create("span", {'className':'muiForumCateNum',innerHTML:'发帖数<span>' + topicCount + '</span>'}, countNode);
			domConstruct.create("span", {'className':'muiForumCateNum',innerHTML:'回帖数<span>' + postCount + '</span>'}, countNode);
			if(data['parentId'] && data['parentId']!=null){
				var parentNode = domConstruct.create("div", {'className':'muiForumCateParent'}, this.contentNode);
				var tmpNode= domConstruct.create("div", {'className':'muiForumCateParentInfo',innerHTML:data['parentName']}, parentNode);
				var _self = this;
				this.connect(tmpNode,"click",function(){
					_self.gotoParent(data['parentId'], data['parentName']);
				});
			}
		},
		
		gotoParent:function(id, name){
			var url = "/km/forum/mobile/index.jsp";
			url = util.setUrlParameter(url,"moduleName",name);
			url = util.setUrlParameter(url,"filter","1");
			url = util.setUrlParameter(url,"queryStr",util.setUrlParameter(this.cateListDataUrl,"q.categoryId",id));
			location = util.formatUrl(url);
		},
		
		buildErrorInfo:function(data){
			this.buildBaseFrame();
			domConstruct.create("div", {'className':'muiForumCateDesc',innerHTML:'<span>板块信息获取错误。</span>'}, this.detailNode);
		},
		
		buildBaseFrame:function(){
			domConstruct.empty(this.domNode);
			this.contentNode = domConstruct.create("div", {'className':'muiForumCateInfo'}, this.domNode);
			this.iconNode = domConstruct.create("div", {'className':'muiForumCateIcon'}, this.contentNode);
			var icon = domConstruct.create("span", {'className':'muiForumCateImg'}, this.iconNode);
			domConstruct.create("i", {'className':'mui mui-evaluation'}, icon);
			this.detailNode = domConstruct.create("div", {'className':'muiForumCateContent'}, this.contentNode);
			this.titleNode = domConstruct.create("div", {'className':'muiForumCateTitle',innerHTML:this.categoryName}, this.detailNode);
		}
	});
	return catebox;
});
},
'km/forum/mobile/resource/js/ForumCategoryItemMixin':function(){
define(	["dojo/_base/declare" , "dojo/dom-class", "mui/iconUtils" , "mui/simplecategory/SimpleCategoryItemMixin"],
		function(declare, domClass, iconUtils, SimpleCategoryItemMixin) {
			var item = declare("km.forum.mobile.resource.js.ForumCategoryItemMixin", [SimpleCategoryItemMixin], {

				buildRendering:function(){
					this.inherited(arguments);
					this.type = this.nodeType=="CATEGORY"?window.SIMPLE_CATEGORY_TYPE_CATEGORY:1;
				},
				
				//是否显示往下一级
				showMore : function(){
					return true;
				},
				
				//是否显示选择框
				showSelect:function(){
					if(this.type==window.SIMPLE_CATEGORY_TYPE_CATEGORY){
						return true;
					}
					return false;
				}
			});
			return item;
		});
},
'km/forum/mobile/resource/js/ForumCategoryList':function(){
define( [ "dojo/_base/declare","mui/category/CategoryList" ], function(declare,
		CategoryList) {
	return declare("km.forum.mobile.resource.js.ForumCategoryList", [ CategoryList ], {
		
		modelName:null,
		
		//数据请求URL
		dataUrl : '/km/forum/mobile/kmForumMobileCategory.do?method=cateList&categoryId=!{parentId}&modelName=!{modelName}&authType=!{authType}'
			
	});
});
},
'km/forum/mobile/resource/js/ForumPostItemListMixin':function(){
define([
    "dojo/_base/declare",
	"mui/list/_TemplateItemListMixin",
	"km/forum/mobile/resource/js/ForumPostItemMixin"
	], function(declare, _TemplateItemListMixin, ForumPostItemMixin) {
	//回帖混编
	return declare("km.forum.mobile.resource.js.ForumPostItemListMixin", [_TemplateItemListMixin], {
		
		rowsize:10,
		
		itemTemplateString : null,
		
		itemRenderer: ForumPostItemMixin
	});
});
},
'km/forum/mobile/resource/js/ForumTopicHead':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
    "dojo/dom-class",
    "dojo/touch",
    "dijit/_WidgetBase",
    "mui/util"
	], function(declare, domConstruct, domClass, touch, WidgetBase, util) {
	var item = declare("km.forum.mobile.resource.js.ForumTopicHead", [WidgetBase], {
		created:'',
		
		//阅读数
		count:0,
		
		//回复数
		replyCount:0,
		
		//标题
		label:null,
		
		//所属板块
		cateName:null,
		
		cateId:null,
		
		//置顶
		top:false,
		
		//火
		hot:false,
		
		//精华
		pinked:false,
		
		//结贴
		closed:false,
		
		baseClass:'muiTopicHead',
		
		buildRendering : function() {
			this.inherited(arguments);
			this.contendNode = domConstruct.create('div',{className:'muiTopicContent'},this.domNode);
			this.buildInternalRender();
		},
		
		postCreate : function() {
			this.inherited(arguments);
			this.subscribe("/km/forum/replaySuccess",'changeReplayCount');
		},
		
		startup:function(){
			this.inherited(arguments);
		},
		
		buildInternalRender:function(){
			this.topNode = domConstruct.create('div',{className:'muiTopicHeadT'},this.contendNode);
			if(this.label){
				
				var headTitle=domConstruct.create('span',{className:'muiTopicHeadTitle'},this.topNode);
				
				if(this.top){
					domConstruct.create('span',{className:'muiTopicHeadSign muiTopicHeadTop',innerHTML:"顶"},headTitle);
				}
				if(this.hot){
					domConstruct.create('i',{className:'mui-hotPost mui'},headTitle);
				}
				if(this.pinked){
					domConstruct.create('span',{className:'muiTopicHeadSign muiTopicHeadPink',innerHTML:"精"},headTitle);
				}
				if(this.closed){
					domConstruct.create('i',{className:'mui mui-todo_lock'},headTitle);
				}
				domConstruct.create('span',{innerHTML:this.label},headTitle);
				
			}
			var tmpNode = domConstruct.create('div',{className:'muiTopicHeadB'},this.contendNode);
			this.bottomNode = domConstruct.create('div',{className:'muiTopicHeadSummary'},tmpNode);
			

			//版块名称
			if(this.cateName){
				var cate = domConstruct.create('div',{className:'muiTopicHeadCate',
					innerHTML:"<span>" + this.cateName+"&nbsp;<i class='mui mui-Cforward'></i></span>"},this.bottomNode);
				this.connect(cate,touch.press,'gotoCate');
			}
			
			//阅读数、回复数
			var numInfo = domConstruct.create('div',{className:'muiTopicHeadNumInfo'},this.bottomNode);
			//domConstruct.create('span',{className:'muiTopicHeadNum mui mui-meeting_date', 
			//	innerHTML:'<span>' + this.created + '</span>'},numInfo);
			var replaySpan = domConstruct.create('span',{className:'muiTopicHeadNum mui mui-msg'},numInfo);
			this.replayNode = domConstruct.create('span',{innerHTML: this.replyCount},replaySpan);
			domConstruct.create('span',{className:'muiTopicHeadNum mui mui-eyes', 
				innerHTML:'<span>' + this.count + '</span>'},numInfo);
			
			
		},
		changeReplayCount:function(){
			if(this.replayNode)
				this.replayNode.innerHTML = '<span>' + (this.replyCount + 1) + '</span>';
		},
		
		gotoCate:function(evt){
			var url = "/km/forum/mobile/index.jsp";
			var dataUrl = '/km/forum/km_forum/kmForumTopicIndex.do?method=listChildren&q.categoryId=!{cateId}&orderby=fdLastPostTime&ordertype=down';
			url = util.setUrlParameter(url,"moduleName",this.cateName);
			url = util.setUrlParameter(url,"filter","1");
			url = util.setUrlParameter(url,"queryStr",util.setUrlParameter(dataUrl,"q.categoryId",this.cateId));
			location = util.formatUrl(url);
		}
	});
	return item;
});
},
'km/forum/mobile/resource/js/ForumTopicCreate':function(){
define([
    "dojo/_base/declare",
    "dojo/_base/array",
    "dojo/query",
    "dojo/request",
    "dijit/registry",
    "mui/util",
    "mui/device/device",
    "mui/tabbar/CreateButton",
    "mui/dialog/Tip",
    "km/forum/mobile/resource/js/ForumCategoryMixin",
    "mui/form/editor/EditorUtil",
    "dojo/text!km/forum/mobile/resource/js/layout.html"
	], function(declare, array, query, request, registry, util, device, CreateButton, tip, ForumCategoryMixin, EditorUtil, tmpl) {
	var create = declare("km.forum.mobile.resource.js.ForumTopicCreate", [CreateButton, ForumCategoryMixin], {
		modelName:'com.landray.kmss.km.forum.model.KmForumCategory',
		
		cateId:null,
		
		_createCateId:null,
		
		saveUrl:'/km/forum/mobile/kmForumPost.do?method=save',
		
		categoryDetailUrl:'/km/forum/km_forum_cate/kmForumCategory.do?method=categoryDetail&categoryId=!{cateId}&base=1',
		
		startup:function(){
			this.inherited(arguments);
			if(this.cateId){
				var _self = this;
				request.post(util.formatUrl(util.urlResolver(this.categoryDetailUrl,this)), {
					handleAs : 'json'
				}).then(function(data) {
					if(data['parentId']==null || data['parentId']==''){
						_self._createCateId = null;
					}else{
						_self._createCateId = _self.cateId;
					}
				}, function(data) {
					_self._createCateId = null;
				});
			}
		},
		
		_onClick:function(evt){
			if(this._createCateId!=null && this._createCateId!=''){
				this.curIds = this._createCateId;
				this.newTopic();
			}else{
				this.inherited(arguments);
			}
		},
		
		afterSelectCate: function(evt){
			this.newTopic();
		},
		
		newTopic:function(){
			var _self = this;
			var forumValidates = [];
			if(window.validateCreateTopic){
				forumValidates.push(window.validateCreateTopic);
			}
			EditorUtil.popup(this.saveUrl,{
				name:"docContent",
				subject:"docSubject",
				layout:tmpl,
				placeholder:'发帖',
				validates:forumValidates,
				data:{
					fdIsAnonymous:"false",
					fdPdaType:device.getClientType(),
					fdForumId:this.curIds,
					isNormal:"1"
				}},function(data){
					if (data.status == 200) {
						tip.success({
							text : '操作成功'
						});
						
					} else{
						tip.fail({
							text : '操作失败'
						});
					}
					if(window.refreshList){
						window.refreshList();
					}
				});
		}
	});
	return create;
});
},
'km/forum/mobile/resource/js/ForumPostItemMixin':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
    "mui/util",
    "dojo/html",
    "dojo/touch",
    "dojo/query",
    "dijit/_WidgetBase",
    "mui/rtf/RtfResize",
    "mui/iconUtils",
    "mui/dialog/OperaTip",
    "dojo/dom-class",
    "sys/praise/mobile/import/js/_PraiseInformationMixin"
	], function(declare, domConstruct, util, html, touch, query, WidgetBase, RtfResize, iconUtils, OperaTip, domClass, _PraiseInformationMixin) {
	var item = declare("km.forum.mobile.resource.js.ForumPostItemMixin", [WidgetBase, _PraiseInformationMixin], {
		
		fdId : null,
		
		rowIndex: null ,
		
		tmplURL : null,
		
		//发帖人图像
		icon:null,
		
		//发帖、回复人
		creator:null,
		
		//创建时间
		created:null,
		
		//楼层
		floor:null,
		
		//积分等级
		score:null,
		
		//说明信息，如：楼主
		extendInfo:null,
		
		//来自信息
		from:'',
		
		//是否可以评论
		optFlag:null,
		
		//帖子内容
		content:null,
		
		//引用帖id
		parentId:null,
		
		//引用帖起草人
		parentPoster:null,
		
		//引用贴创建时间
		parentCreated:null,
		
		//引用帖信息
		parentSummary:null,
		
		baseClass:'muiForumPostItem',
		
		buildRendering : function() {
			this.inherited(arguments);
			this.contentNode = domConstruct.create("div",{className:'muiForumPostContent'},this.domNode);
			this.buildItem();
		},
		
		buildItem:function(){
			var contentArea =  domConstruct.create("div",{className:'muiPostContentArea'},this.contentNode);
			this.contentTop =  domConstruct.create("div",{className:'muiPostContentT'},contentArea);
			this.buildTop();
			this.contentMiddle =  domConstruct.create("div",{className:'muiPostContentC'},contentArea);
			this.buildMiddle();
			if(this.optFlag){
				this.contentBottom =  domConstruct.create("div",{className:'muiPostContentB'},contentArea);
				this.buildBootom();
			}
		},
		
		buildTop:function(){
			var head = domConstruct.create("div",{className:'muiPostHead'},this.contentTop);
			var iconNode = domConstruct.create("div",{className:'muiPostIcon'},head);
			if(this.icon)
				iconUtils.setIcon(this.icon, null, this._posterIcon, null, iconNode);
			
			var createDiv = domConstruct.create("div", {className:'muiPostCreate'}, head);
			var tmpHtml = '';  
			if(this.creator){
				tmpHtml = tmpHtml + this.creator;
			}
			if(this.score){
				tmpHtml = tmpHtml + '<span class="muiPostFloor muiPostFloorLevel">' + this.score + '</span>';
			}
			if(this.extendInfo){
				tmpHtml = tmpHtml + '<span class="muiPostFloor muiPostFloor1">' + this.extendInfo + '</span>';
			}
			if(tmpHtml!=''){
				domConstruct.create("div", {className:'muiPostCreator',innerHTML : tmpHtml}, createDiv);
			}
			
			tmpHtml = '';
			if(this.created){
				tmpHtml = tmpHtml + '<i class="mui mui-time"></i><span>' + this.created +'</span>';
			}
			if(this.from){
				tmpHtml = tmpHtml + '<span>' + this.from + '</span>';
			}
			if(tmpHtml!='')
				domConstruct.create("div", {className:'muiPostCreated',innerHTML:tmpHtml}, createDiv);
			
			if(this.floor && this.floor!=null){
				tmpHtml='';
				var florInt = parseInt(this.floor, 10);
				switch (florInt) {
				case 1:
					break;
				case 2:
					tmpHtml='<span class="muiPostFloor muiPostFloor2">沙发</span>';
					break;
				case 3:
					tmpHtml='<span class="muiPostFloor muiPostFloor3">板凳</span>';
					break;
				case 4:
					tmpHtml='<span class="muiPostFloor muiPostFloor4">地板</span>';
					break;
				default:
					tmpHtml='<span class="muiPostFloorX">'+(florInt-1)+'&nbsp;楼</span>';
					break;
				}
				if(tmpHtml!='')
					domConstruct.create("div", {className:'muiPostFloorInfo',innerHTML:tmpHtml}, head);
			}
		},

		buildMiddle:function(){
			if(this.parentId){
				var parentDiv = domConstruct.create("div", {className:'muiPostParent'}, this.contentMiddle);
				domConstruct.create("div", {className:'muiPostParentV'}, parentDiv);
				var parentInfo = domConstruct.create("div", {className:'muiPostParentC'}, parentDiv);
				var tmpHtml = '';
				if(this.parentPoster)
					tmpHtml = tmpHtml + '<span>'+ this.parentPoster +'</span>';
				if(this.parentCreated)
					tmpHtml = tmpHtml + '<span>发表于</span><span>'+ this.parentCreated +'</span>';
				if(tmpHtml!='')
					domConstruct.create("div", {className:'muiPostParentReplay', innerHTML:tmpHtml}, parentInfo);
				if(this.parentSummary){
					tmpHtml = '<span class="muiPostQuoteL"><i class="mui mui-quoteL"></i></span>';
					tmpHtml = tmpHtml + this.parentSummary +'<span class="muiPostQuoteR"><i class="mui mui-quoteR"></i></span>';
					if(tmpHtml!='')
						domConstruct.create("div", {className:'muiPostParentContent', innerHTML:tmpHtml}, parentInfo);
				}
			}
			if(this.content){
				domConstruct.create("div", {className:'muiFieldRtf',
					id:'__RTF_' + this.fdId + '_docContent',innerHTML:this.content}, this.contentMiddle);
			}
			if(this.tmplURL){
				this.attachmentDiv = domConstruct.create("div", {className:'muiPostAttchment'}, this.contentMiddle);
			}
		},
	
		buildBootom:function(){
			var optDiv = domConstruct.create("div", {className:'muiPostContentOpt'}, this.contentBottom);
			var optExpand = domConstruct.create("div", {className:'muiTopicReplyOperation',
				innerHTML:'<span class="l"></span><span class="f"></span><i class="mui mui-more"></i>'}, optDiv);
			var self = this;
			this.connect(optExpand, touch.press, function(){
				this.defer(function(){
					this.expandFun(optExpand);
				},350);
			});
		},
		
		expandFun:function(optExpand){
			if(!this.dialog || this.dialog.domNode==null){
				var self = this;
				this.modelId = this.fdId;
				this.modelName = "com.landray.kmss.km.forum.model.KmForumPost";
				this.dialog = OperaTip.tip({refNode:optExpand, 
					operas:[
				      {'icon':'muiForumPraiseSign mui-praise','text':'赞','func':function(evt){self.parisePost(evt);}},
				      {'icon':'mui-msg','text':'回复','func':function(){self.replayPost();}}
					]});
				this.defer(function(){
					if(this.hasPraised){
						this.hasPraised();
					}
				},220);
			}
		},
		
		postCreate : function() {
			this.inherited(arguments);
		},
		
		startup:function(){
			this.inherited(arguments);
			if(this.tmplURL){
				var _self = this;
				require(["dojo/text!" + util.formatUrl(util.urlResolver(this.tmplURL , this))], function(tmplStr){
					domConstruct.empty(_self.attachmentDiv);
					var dhs = new html._ContentSetter({
						node:_self.attachmentDiv,
						parseContent : true,
						cleanContent : true
					});
					dhs.set(tmplStr);
					dhs.parseDeferred.then(function(results) {
						_self.parseResults = results;
						_self.addtionOpt();
						
					});
					dhs.tearDown();
				});
			}
		},
		parisePost:function(evt){
			this.doPraised();
		},
		
		togglePraised:function(isInit){
			var icons = query(".muiDialogOperationTip .muiDialogOperationButton .muiForumPraiseSign");
			if(icons.length>0){
				var onClass='mui-scaleX mui-praise-on';
				var outClass='mui-scaleX mui-praise';
				if(this.isPraised){
					domClass.replace(icons[0], onClass, outClass);
				}else{
					domClass.replace(icons[0], outClass, onClass);
				}
				this.defer(function(){
					domClass.remove(icons[0],'mui-scaleX');
				},300)
			}
		},
		
		replayPost:function(evt){
			if(window.replayPost){
				if(this.rowIndex==0){
					window.replayPost();
				}else{
					window.replayPost(this);
				}
			}
		},
		
		addtionOpt : function(){
			var rtfName = "#__RTF_" + this.fdId + "_docContent";
			var rtfDom = query(rtfName,this.domNode);
			if(rtfDom.length>0){
				new RtfResize({containerNode:rtfDom[0]});
			}
		}		
	});
	return item;
});
},
'km/forum/mobile/resource/js/ForumTopicItemListMixin':function(){
define([
    "dojo/_base/declare",
	"mui/list/_TemplateItemListMixin",
	"km/forum/mobile/resource/js/ForumTopicItemMixin"
	], function(declare, _TemplateItemListMixin, ForumTopicItemMixin) {
	//图文混编
	return declare("km.forum.mobile.resource.js.ForumTopicItemListMixin", [_TemplateItemListMixin], {
		
		itemTemplateString : null,
		
		itemRenderer: ForumTopicItemMixin
	});
});
},
'km/forum/mobile/resource/js/ForumTopicParseMixin':function(){
define([
    "dojo/_base/declare",
    "dojo/dom-construct",
    "sys/praise/mobile/import/js/_PraiseTabBarButtonMixin"
	], function(declare, domConstruct, _PraiseTabBarButtonMixin) {
	var create = declare("km.forum.mobile.resource.js.ForumTopicParseMixin", [_PraiseTabBarButtonMixin], {
	
		togglePraised:function(isInit){
			this.inherited(arguments);
			if(!isInit){
				if(this.isPraised){
					this._set('count',this.count + 1);
				}else{
					this._set('count',this.count - 1);
				}
				this._reDrawLabel();
			}
		},
		
		_reDrawLabel:function(){
			if(this.labelNode){
				if(this.count>0){
					this.labelNode.innerHTML =  this.count;
				}else{
					this.labelNode.innerHTML = '';
				}
			}
		},
		
		_setCountAttr:function(count){
			this._set('count',count);
			this._reDrawLabel();
		}
	});
	return create;
});
},
'km/forum/mobile/resource/js/ForumCategoryMixin':function(){
define( [ "dojo/_base/declare"],
		function(declare) {
			window.SIMPLE_CATEGORY_TYPE_CATEGORY = 0;
			var simpleCategory = declare("km.forum.mobile.resource.js.ForumCategoryMixin", null, {

				type : SIMPLE_CATEGORY_TYPE_CATEGORY ,
				
				//模块名
				modelName:null,
				
				//对节点的验证权限,0显示所有(00可以选中所有,01只能选中有维护权限的,02只能选中有使用权限的),1 只显示有维护权限的
				authType:"02",
				
				isMul: false , 
				
				templURL : "km/forum/mobile/category/category_sgl.jsp?modelName=!{modelName}&authType=!{authType}",
				
				_setIsMulAttr:function(mul){
					this._set('isMul' , mul);
				}
				
			});
			return simpleCategory;
	});
}
}});