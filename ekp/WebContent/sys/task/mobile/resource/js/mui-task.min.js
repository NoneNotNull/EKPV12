require({cache:{"sys/task/mobile/resource/js/list/item/EvaluateItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/util","mui/list/item/_ListLinkItemMixin","dojo/date/locale","mui/i18n/i18n!sys-mobile"],function(c,b,i,e,f,j,d,g,h,a){var k=c("sys.task.list.item.EvaluateItemMixin",[j,g],{tag:"li",baseClass:"taskCommonListItem muiEvaluateListItem",href:"javascript:void(0);",buildRendering:function(){this.inherited(arguments);this.domNode=this.containerNode=this.srcNodeRef||b.create(this.tag,{className:this.baseClass});var o=b.create("div",{className:"info"},this.containerNode);b.create("img",{className:"infoImg",src:this.icon},o);var l=b.create("h4",{innerHTML:this.creator},o);var m=b.create("p",{className:"infoApprove mui mui-editor-face"},l);b.create("span",{innerHTML:this.fdApprove},m);var m=b.create("p",{className:"infoDate mui mui-time"},o);b.create("span",{innerHTML:this.created},m);if(this.clientType){b.create("span",{innerHTML:"来自"+a["mui.comefrom."+this.clientType]},m)}if(this.title){var n=b.create("div",{className:"content"},o);b.create("p",{innerHTML:this.title},n)}},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(l){if(l){this._set("label",l)}}});return k})},"sys/task/mobile/resource/js/EditorMixin":function(){define(["dojo/_base/declare","dojo/text!../tmpl/editor_layout.html"],function(a,b){return a("sys.task.mobile.resource.js.EditorMixin",null,{layout:b})})},"sys/task/mobile/resource/js/list/_CollpaseListItemMixin":function(){define(["dojo/_base/declare","dojo/ready","dojo/dom-construct","dojo/dom-style","dojo/dom-attr","mui/util"],function(d,e,b,c,f,a){return d("sys.task.list._CollpaseListItemMixin",null,{maxCount:3,collpase:true,buildRendering:function(){this.inherited(arguments);var g=this,h=this.maxCount;this.url=a.setUrlParameter(this.url,"rowsize",h);this.subscribe("/mui/list/loaded",function(k,i){if(this==k){var j=i.page,l=j.totalSize-(j.currentPage*j.pageSize);if(g.collpase&&l>0){g.buildToggleDom(i)}else{g.collpase=false;g.buildToggleDom(i)}}})},buildToggleDom:function(g){if(!this.toggleDom){this.toggleDom=b.create("li",{className:"toggle"},this.domNode,"last");c.set(this.toggleDom,{"text-align":"center",margin:"0.5rem 0"});this.connect(this.toggleDom,"click","___toggle")}if(this.collpase){var h=g.page,i=h.totalSize-(h.currentPage*h.pageSize);b.empty(this.toggleDom);f.set(this.toggleDom,"innerHTML","还有"+i+"项");b.create("i",{className:"mui mui-down-n"},this.toggleDom)}else{b.destroy(this.toggleDom)}},___toggle:function(){if(this.collpase){if(this._loadOver){}else{this.loadMore()}}else{}},buildNoDataItem:function(){},handleOnPush:function(){}})})},"sys/task/mobile/resource/js/list/FeedbackItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin","sys/task/mobile/resource/js/list/item/FeedbackItemMixin","sys/task/mobile/resource/js/list/_CollpaseListItemMixin"],function(b,c,d,a){return b("sys.task.list.FeedbackItemListMixin",[c,a],{itemTemplateString:null,itemRenderer:d})})},"sys/task/mobile/resource/js/NavBarMixin":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/dom-construct"],function(c,b,a){return c("sys.task.mobile.resource.js.NavBarMixin",null,{buildRendering:function(){this.inherited(arguments);a.destroy(this.selectedNode);this.selectedNode=a.create("div",{className:"muiTaskNavBarSelected"},this.domNode);a.create("i",{className:"arr arrM"},this.selectedNode);a.create("i",{className:"arr arrC"},this.selectedNode)},formatEvt:function(d){return d}})})},"sys/task/mobile/resource/js/list/EvaluateItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin","sys/task/mobile/resource/js/list/item/EvaluateItemMixin","sys/task/mobile/resource/js/list/_CollpaseListItemMixin"],function(b,c,d,a){return b("sys.task.list.EvaluateItemListMixin",[c,a],{itemTemplateString:null,itemRenderer:d})})},"sys/task/mobile/resource/js/RtfAttachmentPlugin":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/query","mui/form/editor/plugins/EditorPluginBaseMixin"],function(b,a,c,d){return b("mui.form.editor.plugins.face.Plugin",[d],{type:"attachment",attachmentView:"#attachmentView",_isShow:false,icon:"mui-attachEdit",event:function(e){this._attachmentShow(e)},_attachmentShow:function(e){this.iconNode=e.target;if(this._isShow){this.hide();return}this._isShow=true;this.show()},show:function(){this.inherited(arguments);if(this.attachmentView){a.set(this.attachmentView,"display","block")}},hide:function(){this.inherited(arguments);if(this.attachmentView){a.set(this.attachmentView,"display","none")}},startup:function(){this.inherited(arguments);if(typeof(this.attachmentView)=="string"){this.attachmentView=c(this.attachmentView)[0]}}})})},"sys/task/mobile/resource/js/list/item/FeedbackItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojo/date/locale","dojox/mobile/_ItemBase","mui/util","mui/list/item/_ListLinkItemMixin","mui/rtf/RtfResizeUtil","sys/task/mobile/resource/js/_AttachmentItemMixin","mui/i18n/i18n!sys-mobile"],function(d,c,j,g,i,l,k,e,h,f,b,a){var m=d("sys.task.list.item.FeedbackItemMixin",[k,h,b],{tag:"li",baseClass:"taskCommonListItem muiFeedbackListItem",href:"javascript:void(0);",fdModelName:"com.landray.kmss.sys.task.model.SysTaskFeedback",formBeanName:"sysTaskFeedbackForm",buildRendering:function(){this.inherited(arguments);this.domNode=this.containerNode=this.srcNodeRef||c.create(this.tag,{className:this.baseClass});var q=c.create("div",{className:"info"},this.containerNode);c.create("img",{className:"infoImg",src:this.icon},q);c.create("h4",{innerHTML:this.creator},q);var p=c.create("p",{className:"infoDate mui mui-time"},q);c.create("span",{innerHTML:this.created},p);if(this.clientType){c.create("span",{innerHTML:"来自"+a["mui.comefrom."+this.clientType]},p)}var o=c.create("div",{className:"progress"},q);this._buildProgress(this.progress,o);if(this.title){var r=c.create("div",{className:"content"},q);c.create("p",{innerHTML:this.title},r)}if(this.fdId){var n=c.create("div",{className:""},q);this.createAtt(n,{fdModelId:this.fdId})}},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(n){if(n){this._set("label",n)}},_buildProgress:function(n,q){n=n.replace("%","");var o=(18*parseInt(n)/5);var t=c.create("div",{className:"pie_left"},q);var p=c.create("div",{className:"left"},t);if(o>180){var r=o-180;g.set(p,"transform","rotate("+r+"deg)");g.set(p,"-webkit-transform","rotate("+r+"deg)")}var s=c.create("div",{className:"pie_right"},q);var v=c.create("div",{className:"right"},s);if(o<180){g.set(v,"transform","rotate("+o+"deg)");g.set(v,"-webkit-transform","rotate("+o+"deg)")}else{g.set(v,"transform","rotate(180deg)");g.set(v,"-webkit-transform","rotate(180deg)")}var w=c.create("div",{className:"mask",innerHTML:"%"},q);var u=c.create("span",{innerHTML:n});c.place(u,w,"first")}});return m})},"sys/task/mobile/resource/js/list/CalendarItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin","sys/task/mobile/resource/js/list/item/CalendarItemMixin"],function(b,c,a){return b("sys.task.list.CalendarItemListMixin",[c],{itemTemplateString:null,itemRenderer:a})})},"sys/task/mobile/resource/js/_AttentionTabBarButtonMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/request","mui/util","dojo/dom-class","mui/dialog/Tip"],function(c,f,e,a,d,b){return c("sys.task.mixin._AttentionTabBarButtonMixin",null,{attentionUrl:"/sys/task/sys_task_main/sysTaskMain.do?method=updateAttention&forward=lui-source",disAttentionUrl:"/sys/task/sys_task_main/sysTaskMain.do?method=updateAttention&isAttention=true&forward=lui-source",hasAttention:false,fdId:null,scaleClass:"muiAttentionMaskScale",attentionClass:"mui-focus-on",disAttentionClass:"mui-focus-off",buildRendering:function(){this.inherited(arguments)},startup:function(){if(this._started){return}this.inherited(arguments);this.toggleAttention(this.hasAttention)},replaceClass:function(h){var k=this["iconNode"+1],j=this["iconNode"+2];var i=h?this.attentionClass:this.disAttentionClass,g=h?this.disAttentionClass:this.attentionClass;d.replace(k,i+" "+this.scaleClass,g+" "+this.scaleClass);d.replace(j,i+" "+this.scaleClass,g+" "+this.scaleClass)},removeScaleClass:function(){var h=this["iconNode"+1],g=this["iconNode"+2];this.defer(f.hitch(this,function(){d.remove(h,this.scaleClass);d.remove(g,this.scaleClass)}),300)},toggleAttention:function(g){this.replaceClass(g);this.removeScaleClass();this.set("hasAttention",g);this.set("lock",false)},rq:function(h,i,g,j){e(a.formatUrl(h),{handleAs:g,method:"post",data:i}).then(f.hitch(this,j))},onClick:function(g){if(this.lock){return false}this.set("lock",true);if(!this.hasAttention){this.rq(this.attentionUrl,{fdTaskId:this.fdId},"json",function(h){this.toggleAttention(true);b.tip({icon:"mui "+this.attentionClass,text:"加入关注"})})}else{this.rq(this.disAttentionUrl,{fdTaskId:this.fdId},"json",function(h){this.toggleAttention(false);b.tip({icon:"mui "+this.disAttentionClass,text:"取消关注"})})}return false}})})},"sys/task/mobile/resource/js/OverflowTabBar":function(){define(["dojo/_base/declare","dojox/mobile/TabBar","dojo/query","dojo/parser","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/_base/array","dojox/mobile/Tooltip","dojo/text!../tmpl/more_button.html","mui/util"],function(d,f,j,a,k,g,b,c,h,i,l,e){return d("sys.task.mobile",[f],{fill:"overflow",template:l,resize:function(m){},startup:function(){this.inherited(arguments);this.resizeByWidth();this.subscribe("/mui/list/afterScroll","hideOpener")},resizeByWidth:function(){var o=this;if(this.getChildren().length==0){g.set(this.domNode,"margin","0");g.set(this.domNode,"padding","0")}k.add(this.domNode,"muiTabBarGrid");k.add(this.domNode,"taskTabBar");var n=b.getContentBox(this.domNode),m=0;h.forEach(this.getChildren(),function(s,p){m+=b.getMarginBox(s.domNode).w;if(m>(n.w-50)){if(!this.opener){a.parse(c.create("div",{innerHTML:this.template},this.domNode)).then(function(t){h.forEach(t,function(v,u){o.aroundNode=c.place(v.domNode,o.domNode,"last");o.aroundWidget=v})});this.opener=new i();c.place(this.opener.domNode,document.body,"last");k.add(this.opener.domNode,"muiNavBarGroup taskNavBarGroup");var r=this.opener.containerNode;c.create("div",{className:"muiNavBarGroupContainer"},r);this.connect(this.aroundNode,"click","_openerClick")}var q=c.create("div",{innerHTML:s.label,className:"mblTabBarButton overflowBarButton"});if(s.href){this.connect(q,"click",function(){location.href=e.formatUrl(s.href)})}c.place(q,j(".muiNavBarGroupContainer",o.opener.containerNode)[0],"last");s.destroy()}},this)},_openerClick:function(){var m=this.opener;if(!m){return}if(m.resize){m.hide()}else{m.show(this.aroundNode,["below"])}this.handle=this.connect(document.body,"touchend","unClick")},hideOpener:function(){var m=this.opener;if(m&&m.resize){m.hide()}},unClick:function(m){var o=m.target,n=true;while(o){if(o==this.domNode){n=false;break}o=o.parentNode}if(n){this.defer(function(){this.hideOpener()},400)}this.disconnect(this.handle)}})})},"sys/task/mobile/resource/js/_AttachmentItemMixin":function(){define(["dojo/_base/declare","dojo/request","dojo/html","dojo/query","dojo/dom-construct","mui/util"],function(d,e,c,f,b,a){return d("sys.task.mobile.resource.js._AttachmentItemMixin",null,{attUrl:"/sys/task/sys_task_feedback/sysTaskFeedback.do?method=loadAttachmentInfo",rscriptType:/^$|\/(?:java|ecma)script/i,createAtt:function(h,j){if(!j.fdModelId&&!this.fdModelId){return}this.fdModelId=j.fdModelId||this.fdModelId;if(!j.fdModelName&&!this.fdModelName){return}this.fdModelName=j.fdModelName||this.fdModelName;if(!j.formBeanName&&!this.formBeanName){return}this.formBeanName=j.formBeanName||this.formBeanName;var i=this;var g=new c._ContentSetter({parseContent:true,onEnd:function(){var k=f("script",this.node);k.forEach(function(m,l){if(i.rscriptType.test(m.type||"")){if(m.src){}else{window["eval"].call(window,(m.text||m.textContent||m.innerHTML||""))}}});this.inherited("onEnd",arguments)}});this.attContent=b.create("div",{className:"listAttachmentContent"},h,"last");g.node=this.attContent;this.getText(function(k){g.set(k)});g.tearDown()},getText:function(h){var g=this;var i={};i.fdModelId=this.fdModelId;i.fdModelName=this.fdModelName;i.formBeanName=this.formBeanName;var j=e.post(a.formatUrl(this.attUrl),{data:i,sync:true}).response.then(function(k){if(k.status==200){var l=k.data;h.call(g,l)}})}})})},"sys/task/mobile/resource/js/_ProgressSliderMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/dom-class","dojo/touch"],function(c,a,b,d,e){return c("sys.task.mobile._ProgressSliderMixin",null,{valueText:0,buildRendering:function(){this.inherited(arguments);if(!this.templateString){this.valueTextNode=a.create("div",{className:"progressValueText"},this.domNode,"last");this.valueTextInnerNode=a.create("div",{innerHTML:this.valueText+"%",className:"progressValueTextInner"},this.valueTextNode);a.create("div",{"class":"progressTriangle"},this.valueTextNode);b.set(this.domNode,"width","80%");if(this.valueText){this.set("value",this.valueText);var f=parseInt(this.valueText)+"%";b.set(this.valueTextNode,{left:f})}}},_setValueTextAttr:function(f){this.valueText=f;this.valueTextInnerNode.innerHTML=f+"%"},_setValueAttr:function(g){this.inherited(arguments);this.set("valueText",g);var f=parseInt(g)+"%";b.set(this.valueTextNode,{left:f})},show:function(){b.set(this.domNode,"display","block")},hide:function(){b.set(this.domNode,"display","none")},setDisabled:function(){this.disabled=true;this.disconnect(this.touchBox,e.press);this.disconnect(this.handle,e.press)}})})},"sys/task/mobile/resource/js/list/SysTaskJsonStoreList":function(){define(["dojo/_base/declare","dojo/topic","mui/list/JsonStoreList","dojox/mobile/viewRegistry"],function(c,a,d,b){return c("sys.task.list.SysTaskJsonStoreList",[d],{onComplete:function(){this.inherited(arguments);var e=b.getEnclosingView(this.domNode);a.publish("/mui/list/pushDomHide",e)},handleOnPush:function(g,f){var e=b.getEnclosingView(this.domNode);if(e.isVisible()&&!this._loadOver){a.publish("/mui/list/pushDomShow",e);this.loadMore(f)}if(f){f.done(this)}},startup:function(){this.inherited(arguments)}})})},"sys/task/mobile/resource/js/list/item/CalendarItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/util","mui/i18n/i18n","mui/list/item/_ListLinkItemMixin","dojo/date/locale"],function(b,a,h,d,f,i,c,k,e,g){var j=b("sys.task.list.item.CalendarItemMixin",[i,e],{tag:"li",baseClass:"muiTaskListItem",href:"javascript:void(0);",buildRendering:function(){this.inherited(arguments);this.domNode=this.containerNode=this.srcNodeRef||a.create(this.tag,{className:this.baseClass});var m=a.create("div",{className:"leftBar"},this.containerNode);a.create("img",{className:"muiProcessImg",src:this.performSrc},m);if(this.personCount>1){var r=a.create("div",{className:"muiTaskMore"},m);a.create("i",{className:"mui mui-more"},r)}var n=a.create("div",{className:"rightContainer"},this.containerNode),s=a.create("div",{className:"contentContainer"},n),q=a.create("div",{className:"progress"},n);if(this.title){this.labelNode=a.create("h4",{className:"muiSubject",innerHTML:this.title},s)}var p=a.create("ul",{className:"taskIcoList"},s);var l;if(this.fdStatus){var o=this._getStatusInfo(this.fdStatus);l=a.create("li",{},p);a.create("div",{className:"muiTaskStatusTag "+o.className,innerHTML:this.fdStatusText},l)}if(this.overDay){l=a.create("li",{},p);a.create("span",{className:"overday",innerHTML:"超期"+this.overDay+"天"},l)}l=a.create("li",{className:"muiTaskPersons"},p);a.create("i",{className:"mui mui-person"},l);a.create("span",{innerHTML:this.performs},l);this._buildProgress(this.progress,q)},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(l){if(l){this._set("label",l)}},_buildProgress:function(l,o){l=l.replace("%","");var m=(18*parseInt(l)/5);var r=a.create("div",{className:"pie_left"},o);var n=a.create("div",{className:"left"},r);if(m>180){var p=m-180;d.set(n,"transform","rotate("+p+"deg)");d.set(n,"-webkit-transform","rotate("+p+"deg)")}var q=a.create("div",{className:"pie_right"},o);var t=a.create("div",{className:"right"},q);if(m<180){d.set(t,"transform","rotate("+m+"deg)");d.set(t,"-webkit-transform","rotate("+m+"deg)")}else{d.set(t,"transform","rotate(180deg)");d.set(t,"-webkit-transform","rotate(180deg)")}if(this.fdStatus=="3"){var u=a.create("div",{className:"mask"},o);var s=a.create("i",{className:"mui mui-taskComplete"})}else{if(this.fdStatus=="6"){var u=a.create("div",{className:"mask"},o);var s=a.create("i",{className:"mui mui-taskClose"})}else{var u=a.create("div",{className:"mask",innerHTML:"%"},o);var s=a.create("span",{innerHTML:l})}}a.place(s,u,"first")},_getStatusInfo:function(m){var l={"1":{className:"muiTaskInactive"},"2":{className:"muiTaskProgress"},"3":{className:"muiTaskComplete"},"4":{className:"muiTaskTerminate"},"5":{className:"muiTaskOverrule"},"6":{className:"muiTaskClose"}};return l[m]}});return j})}}});